---
import { getCollection } from "astro:content";
import { SITE_TITLE, SITE_CDN } from "../../consts";
import PageLayout from "../../layouts/PageLayout.astro";
import Search from "../../components/Search";
import BaseHead from "../../components/BaseHead.astro";

const posts = await getCollection("blog", ({ data }) => !data.draft);

const searchList = posts.map(({ data }) => ({
  title: data.title,
  description: data.description,
  data,
}));

const ogImage = SITE_CDN + 'social-share.png';
---

<PageLayout>
  <BaseHead
    title={`Search | ${SITE_TITLE}`}
    description={"Search for my articles, projects"}
    image={ogImage}
  />
  <Fragment slot="main">
    <Search client:load searchList={searchList} />
  </Fragment>
</PageLayout>
