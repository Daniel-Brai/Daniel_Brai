---
import type { ProjectFrontmatter } from "../content/_schema";
import LinkButton from "./LinkButton.astro";
import { SITE_CDN } from "../consts";

export interface Props {
  href?: string;
  frontmatter: ProjectFrontmatter;
}

const { href, frontmatter } = Astro.props;
const projectImage = SITE_CDN + frontmatter.heroImage;
---

<div
  class="max-w-xs rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-neutral-700"
>
  <div>
    <img
      class="rounded-t-lg"
      src={projectImage}
      alt={`${frontmatter.title} Project Hero Image`}
      loading="eager"
    />
  </div>
  <div class="p-5">
    <div class="flex items-center justify-between">
      <h5
        class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
      >
        {frontmatter.title}
      </h5>
      {
        frontmatter.github_link && frontmatter.live_link ? (
          <div class="flex items-center space-x-3">
            <LinkButton
              href={frontmatter.github_link}
              className="social-button underline-none"
              title={`${frontmatter.title} Project on Github`}
            >
              <svg
                id="github"
                class="dark:fill-white"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z"
                />
              </svg>
            </LinkButton>
            <LinkButton
              href={frontmatter.live_link}
              className="social-button underline-none"
              title={`Live link to ${frontmatter.title} Project`}
            >
              <svg
                id="live"
                class="dark:fill-white"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
              >
                <>
                  <path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" />
                  <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z" />
                </>
              </svg>
            </LinkButton>
          </div>
        ) : (
          ""
        )
      }
    </div>
    <div>
      <p class="mb-2 font-normal text-gray-700 dark:text-gray-400">
        {frontmatter.description}
      </p>
      <div class="mb-3 flex flex-wrap space-x-3">
        {
          frontmatter.tags?.map((tag) => (
            <div class="text-center">
              <span class="rounded-lg bg-gray-100 px-1.5 py-1 text-[13px] dark:bg-neutral-800">
                {tag}
              </span>
            </div>
          ))
        }
      </div>
    </div>
    <a
      href={href}
      class="inline-flex items-center rounded-lg bg-[rgba(51,154,240)] px-3 py-2 text-center focus:ring-4 dark:focus:ring-blue-800"
    >
      <span class="text-sm font-medium text-white">Read more</span>
      <svg
        class="-mr-1 ml-2 h-4 w-4 fill-white"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
        ><path
          fill-rule="evenodd"
          d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
          clip-rule="evenodd"></path></svg
      >
    </a>
  </div>
</div>
